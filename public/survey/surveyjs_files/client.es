(function(n,t){var i,r;if(typeof exports=="object"&&typeof module=="object")module.exports=t(require("knockout"),require("jquery"));else if(typeof define=="function"&&define.amd)define(["knockout","jquery"],t);else{i=typeof exports=="object"?t(require("knockout"),require("jquery")):t(n.ko,n.jQuery);for(r in i)(typeof exports=="object"?exports:n)[r]=i[r]}})(this,function(n,t){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})},t.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,i){var r,u;if((i&1&&(n=t(n)),i&8)||i&4&&typeof n=="object"&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),i&2&&typeof n!="string")for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r},t.n=function(n){var i=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=2)}([function(t){t.exports=n},function(n){n.exports=t},function(n,t,i){"use strict";function c(n,t){function i(){this.constructor=n}if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(n,t);n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function o(n){return this instanceof o?(this.v=n,this):new o(n)}function h(n){var t=new Date(n.CreatedAt),i=new Date(n.UpdatedOn);return new b(n.Name,t.toDateString(),n.Id,n.ResultId,n.PostId,n.PublishId,n.CreatorId,i.toDateString(),n.IsPublished)}function u(n){return n?"accessKey="+n:""}function ht(n){var t=document.createElement("textarea");return t.innerHTML=n,t.value}function ct(n){for(var i=window.atob(n),r=i.length,u=new Uint8Array(r),t=0;t<r;t++)u[t]=i.charCodeAt(t);return u.buffer}function lt(n){return["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","EL","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"].indexOf(!!n&&n.toUpperCase())!==-1}function g(n,t,i){var u=window.dataLayer||[],r;window.dataLayer=u;r=Math.abs(t);u.push({event:t>0?"add_to_cart":"remove_from_cart",ecommerce:{quantity:r,currency:i,Value:n.total,items:[{item_id:n.product(),item_name:n.title(),price:n.price,quantity:r}]}})}var e,l,a,w,y,nt,p;i.r(t);i.d(t,"ExampleCodeCore",function(){return s});i.d(t,"ExampleCodeViewerItem",function(){return v});i.d(t,"ExampleCodeViewer",function(){return rt});i.d(t,"ExampleCodeSandbox",function(){return ut});i.d(t,"ExamplePlunker",function(){return ft});i.d(t,"SurveyInfoModel",function(){return b});i.d(t,"createSurveyObject",function(){return h});i.d(t,"getAccessKeyUrlComponent",function(){return u});i.d(t,"SurveyResultAccessModel",function(){return k});i.d(t,"SurveyStoreIPModel",function(){return d});i.d(t,"SurveyResults",function(){return et});i.d(t,"MySurveysViewModel",function(){return ot});i.d(t,"NameEditorViewModel",function(){return st});i.d(t,"surveyHtmlDecode",function(){return ht});i.d(t,"_base64ToArrayBuffer",function(){return ct});i.d(t,"isEUCountry",function(){return lt});i.d(t,"productDescriptions",function(){return y});i.d(t,"writeCartChangedEvent",function(){return g});i.d(t,"Product",function(){return nt});i.d(t,"TourViewModel",function(){return p});e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},e(n,t)};l=function(){return l=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},l.apply(this,arguments)};a=Object.create?function(n,t,i,r){r===undefined&&(r=i);var u=Object.getOwnPropertyDescriptor(t,i);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[i]}});Object.defineProperty(n,r,u)}:function(n,t,i,r){r===undefined&&(r=i);n[r]=t[i]};w=Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n["default"]=t};var r=i(0),s=function(){function n(n,t,i,u,f){f===void 0&&(f="");this.name=n;this.product=t;this.platform=i;this.theme=u;this.version=f;this.state=r.observable("empty")}return Object.defineProperty(n.prototype,"isLoading",{get:function(){return this.state()==="loading"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isError",{get:function(){return this.state()==="error"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isReady",{get:function(){return this.state()==="ready"},enumerable:!1,configurable:!0}),n.prototype.load=function(){if(this.state()==="ready"){this.onPerform();return}var n=new XMLHttpRequest,t=this;this.state("loading");n.onreadystatechange=function(){var r,i;if(n.readyState==4)if(n.status==200){if(r=n.responseText,!r){console.error("can't open the example in the CodeSandbox");return}if(i=JSON.parse(r),!!i&&Array.isArray(i.files)){t.onLoad(i);t.state("ready");t.onPerform()}else t.state("error")}else console.error("Something get wrong with 'GetCodeSandboxModel' api method"),t.state("error")};n.open("POST",this.getAPIUrl());n.setRequestHeader("Content-Type","application/json;charset=UTF-8");n.send(JSON.stringify({id:this.name,platform:this.platform,product:this.product,theme:this.theme,version:this.version}))},n.prototype.getAPIUrl=function(){return"/api/CodeViewer/getfiles"},n.prototype.onLoad=function(){},n.prototype.onPerform=function(){},n}(),tt=20,it="/Content/Images/code-viewer/",v=function(){function n(n,t){this.fullName=n;this.content=t;this.isSelected=r.observable(!1);var i=n.split("/");this.level=i.length-1;this.name=i[this.level];this.isDirectory=this.name.indexOf(".")<0;this.padding=this.level*tt+"px";this.imageSrc=it+this.getImageName()+".svg"}return Object.defineProperty(n.prototype,"cursor",{get:function(){return this.isDirectory?"arrow":"pointer"},enumerable:!1,configurable:!0}),n.prototype.getImageName=function(){if(this.isDirectory)return"folder";if(this.name==="package.json")return"npm";var n=this.name.split("."),t=n.length;return t>1?n[t-1]:"js"},n}(),rt=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.selectorCodeElement=".source-code-dynamic code",t.items=r.observableArray(),t.selectedItem=r.observable(null),t.onClickItem=function(n){n&&!n.isDirectory&&t.selectItem(n)},t}return c(t,n),t.prototype.loadCode=function(){this.load()},Object.defineProperty(t.prototype,"currentContent",{get:function(){return!this.selectedItem()?"":this.selectedItem().content},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentClass",{get:function(){if(!this.selectedItem())return"";var n=this.selectedItem().fullName;return n.indexOf(".html")>-1?"content-html language-html":n.indexOf(".css")>-1?"content-css language-css":n.indexOf(".json")>-1?"content-json language-json":"content-js language-javascript"},enumerable:!1,configurable:!0}),t.prototype.selectItem=function(n){var t,i;if(n&&!n.isDirectory&&(!this.selectedItem()||this.selectedItem().isSelected(!1),this.selectedItem(n),n.isSelected(!0),t=document.querySelectorAll(this.selectorCodeElement),t.length!==0))if(i=t[0],n.prettyContent)i.innerHTML=n.prettyContent;else{if(i.className=this.currentClass,i.textContent=n.content,!n.content)return;window.prettyElements&&(window.prettyElements(this.selectorCodeElement),n.prettyContent=t[0].innerHTML)}},t.prototype.onLoad=function(n){var i=this,t=[],r={};n.files.forEach(function(n){i.createDirectories(t,r,n.name);t.push(new v(n.name,n.content))});this.items(t);this.selectItem(this.getFirstSelectedItem(t,n.defaultName))},t.prototype.getFirstSelectedItem=function(n,t){for(var u=null,i,r=0;r<n.length;r++)if((i=n[r],!i.isDirectory)&&(!t||(u||(u=i),i.fullName===t)))return i;return u},t.prototype.createDirectories=function(n,t,i){var e=i.split("/"),r,u,f;if(!(e.length<2))for(r="",u=0;u<e.length-1;u++)r+=e[u],t[r]||(f=new v(r,""),t[f.fullName]=f,n.push(f)),r+="/"},t}(s),ut=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return c(t,n),t.prototype.createCodeSandbox=function(n,t){this.parametersInput=t;this.form=n;this.load()},t.prototype.onLoad=function(n){var t,i;this.parameters={files:this.convertDataToFiles(n)};t=this.parameters.files["package.json"];!t||!t.content||(i=JSON.parse(t.content.replace(/'/g,'"').replace(/\n/g,"")),this.parameters.files["package.json"].content=i)},t.prototype.onPerform=function(){this.parametersInput.value=this.getParameters();this.form.submit();this.parametersInput.value=""},t.prototype.convertDataToFiles=function(n){var t={};return n.files.forEach(function(n){t[n.name]={content:n.content}}),t},t.prototype.compress=function(n){return LZString.compressToBase64(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},t.prototype.getParameters=function(){return this.compress(JSON.stringify(this.parameters))},t}(s),ft=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return c(t,n),t.prototype.createPlunker=function(n){this.form=n;this.load()},t.prototype.getAPIUrl=function(){return"/api/CodeViewer/getplunkerfiles"},t.prototype.onLoad=function(n){var t=this;n.files.forEach(function(n){t.addInput(n)})},t.prototype.onPerform=function(){this.form.submit()},t.prototype.addInput=function(n){var t=document.createElement("input");t.setAttribute("type","hidden");t.setAttribute("name","files["+n.name+"]");t.setAttribute("value",n.content);this.form.appendChild(t)},t}(s),b=function(){function n(n,t,i,u,f,e,o,s,h){this.createdAt=t;this.id=i;this.resultId=u;this.postId=f;this.publishId=e;this.creatorId=o;this.updatedOn=s;this.name=r.observable();this.editingName=r.observable();this.showInfo=r.observable(!1);this.isEditing=r.observable(!1);this.isValid=r.observable(!1);this.isPublished=r.observable(null);this.name(n);this.editingName(n);this.isValid(!!i);this.isPublished(h)}return n}();var k=function(n,t,i,f){var e=this;this.id=n;this.accesstype=r.observable(t=="True");this.url=i;e.changeAccessType=function(n){$.ajax({url:e.url+"makeResultPublic?"+u(f)+"&id="+e.id+"&makeResultPublic="+n,type:"PUT",success:function(n){e.accesstype(n)}})};e.allowAccess=function(){e.changeAccessType(!0)};e.disableAccess=function(){e.changeAccessType(!1)}},d=function(n,t,i,f){var e=this;this.id=n;this.storeIP=r.observable(t=="True");this.url=i;e.changeStoreIP=function(n){$.ajax({url:e.url+"storeIPAddressInResult?"+u(f)+"&id="+e.id+"&storeIPAddress="+n,type:"PUT",success:function(n){e.storeIP(n)}})};e.allowStoreIP=function(){e.changeStoreIP(!0)};e.disableStoreIP=function(){e.changeStoreIP(!1)}},et=function(){function n(n,t,i,f,e,o,s,h){var c=this,l,a,y,v;e===void 0&&(e=!1);o===void 0&&(o=null);s===void 0&&(s="https://api.surveyjs.io/private/Surveys/");h===void 0&&(h="");this.surveyJson=n;this.surveyId=t;this.isTrustedAccess=e;this.postId=o;this.url=s;this.accessKey=h;this.currentLocale=r.observable(window.Survey.surveyLocalization.currentLocale||"en");this.showSurveyResult=function(n){var t=c.surveyAnalyticsTabulator.data[n];c.surveyWindow.survey.data=t;c.surveyWindow.survey.currentPage=0;c.surveyWindow.isExpanded=!0;c.surveyWindow.show()};this.clearAllVisible=r.observable(!1);this.clearAllName=r.observable("");this.clearAllEnabled=r.computed(function(){return"@Model.Survey.Name"===c.clearAllName()});this.preventSendingAJAX=!1;this.isLoading=r.observable(!1);this.saveTableState=function(n,t){$.ajax({url:this.url+"setResultTableState?"+u(this.accessKey),type:"PUT",data:{Id:n,Json:JSON.stringify(t)},success:function(){console.info("table state successfully saved")}})};this.saveSummaryState=function(n,t){$.ajax({url:c.url+"setResultSummaryState?"+u(c.accessKey),type:"PUT",data:{Id:n,Json:JSON.stringify(t)},success:function(){console.info("summary state successfully saved")}})};this.savePermissions=function(n,t){$.ajax({url:c.url+"setResultPermissions?"+u(c.accessKey),type:"PUT",data:{Id:n,Json:JSON.stringify(t)},success:function(){console.info("results permissions successfully saved")}})};this.activeTab=r.observable("");this.totalResponses=r.observable(0);this.firstResponseAt=r.observable("");this.lastResponseAt=r.observable("");l=this;a="survey-results-page__survey-window";this.surveyWindow=new window.Survey.SurveyWindow(n);this.surveyWindow.survey.mode="display";y=this.surveyWindow.expandedChangedCallback;this.surveyWindow.expandedChangedCallback=function(){y();l.surveyWindow.windowElement.className=l.surveyWindow.isExpanded?a:a+" survey-results-page__survey-window--closed"};this.surveyWindow.windowElement.className=a;this.resultAccessModel=new k(t,i,s,h);this.storeIpModel=new d(t,f,s,h);this.usedLocales=(this.surveyWindow.survey.getUsedLocales()||[]).map(function(n){return{locName:n,locTitle:window.Survey.surveyLocalization.localeNames[n]}});v=this.survey.locale||window.Survey.surveyLocalization.currentLocale||"en";this.usedLocales.length>0&&!this.usedLocales.some(function(n){return n.locName===v})&&(v=this.usedLocales[0].locName);this.currentLocale(v);this.currentLocale.subscribe(function(n){c.survey.locale=n;c.surveyAnalyticsTabulator&&c.surveyAnalyticsTabulator.update(!0);c.surveyAnalyticsVisPanel&&c.surveyAnalyticsVisPanel.refresh(!0)})}return Object.defineProperty(n.prototype,"survey",{get:function(){var n=this.surveyWindow.survey,i,t;return n.getQuestionByName("HappendAt")||(i=n.addNewPage("page1"),i.addNewQuestion("text","HappendAt"),t=n.getQuestionByName("HappendAt"),t.visible=!1,t.title="Submitted"),n},enumerable:!1,configurable:!0}),n.prototype.insertParameter=function(n,t){n=encodeURI(n);t=encodeURI(t);for(var i=document.location.search.substr(1).split("&"),r=i.length,u;r--;)if(u=i[r].split("="),u[0]==n){u[1]=t;i[r]=u.join("=");break}r<0&&(i[i.length]=[n,t].join("="));document.location.search=i.join("&")},n.prototype.showClearAll=function(n){n.clearAllVisible(!0);document.getElementById("ctrlClearAll").style.visibility="visible"},n.prototype.doClearAllResults=function(){var n=confirm("Are you absolutely sure that you want to delete all results ?");n&&(this.isLoading(!0),$.ajax({url:this.url+"deleteAllResults?"+u(this.accessKey)+"&id="+this.surveyId,type:"DELETE",success:function(){window.location.reload()}}))},n.prototype.deleteSurveyResult=function(n){var t=this,i;(t.isLoading(!0),i=t.surveyAnalyticsTabulator.data[n.getDataPosition()].InstanceId,t.postId&&i)&&$.ajax({url:this.url+"deleteResult?"+u(this.accessKey)+"&postId="+t.postId+"&instanceId="+i,type:"DELETE",success:function(){n.remove();t.surveyAnalyticsTabulator.data.splice(n.getDataPosition(),1)},complete:function(){window.location.reload()}})},n.prototype.removeTableState=function(){var n=confirm("Are you absolutely sure that you want to remove table state ?");n&&$.ajax({url:this.url+"setResultTableState?"+u(this.accessKey),type:"PUT",data:{Id:this.surveyId,Json:null},success:function(){window.location.reload()}})},n.prototype.removeSummaryState=function(){var n=confirm("Are you absolutely sure that you want to remove summary state ?");n&&$.ajax({url:this.url+"setResultSummaryState?"+u(this.accessKey),type:"PUT",data:{Id:this.surveyId,Json:null},success:function(){window.location.reload()}})},n.prototype.normalizeWrongDisplayNameLetterCase=function(n){var t,i;if(!!n)for(t=0;t<n.elements.length;t++)i=n.elements[t].displayname,i&&!n.elements[t].displayName&&(n.elements[t].displayName=i);return n},n.prototype.render=function(n,t,i){var r=this;this.renderTabulator(n,this.normalizeWrongDisplayNameLetterCase(i));this.renderVizPanel(n,this.normalizeWrongDisplayNameLetterCase(t));this.totalResponses(n.length);setTimeout(function(){var t=new Date(864e13),i=new Date(-864e13);n.forEach(function(n){if(n.HappendAt){var r=new Date(n.HappendAt);t>r&&(t=r);i<r&&(i=r)}});r.firstResponseAt(t.toLocaleString());r.lastResponseAt(i.toLocaleString())},100)},n.prototype.renderVizPanel=function(n,t){var i=this,r=this,u={haveCommercialLicense:!0};r.isTrustedAccess&&(u.allowMakeQuestionsPrivate=!0);window.SurveyAnalytics.VisualizationManager.unregisterVisualizerForAll(window.SurveyAnalytics.WordCloud);r.surveyAnalyticsVisPanel=new window.SurveyAnalytics.VisualizationPanel(r.survey.getAllQuestions().slice(0,15),n,u,undefined);r.surveyAnalyticsVisPanel.onPermissionsChangedCallback=function(n){if(!i.preventSendingAJAX){var t=n.permissions;i.savePermissions(i.surveyId,t,i.isLoading);i.preventSendingAJAX=!0;i.surveyAnalyticsTabulator.permissions=t;i.surveyAnalyticsTabulator.refresh(!0);i.preventSendingAJAX=!1}};r.surveyAnalyticsVisPanel.showHeader=!0;r.surveyAnalyticsVisPanel.render(document.getElementById("summaryContent"));r.surveyAnalyticsVisPanel.onStateChanged.add(function(n,t){i.saveSummaryState(i.surveyId,t,i.isLoading)});r.surveyAnalyticsVisPanel.state=t},n.prototype.renderTabulator=function(n,t){var i=this,r=this;window.SurveyAnalyticsTabulator.TableExtensions.registerExtension({location:"details",name:"showinsurvey",visibleIndex:0,render:function(n,t){return window.SurveyAnalyticsTabulator.DocumentHelper.createElement("button","rounded-button",{innerHTML:"Show in Survey",onclick:function(n){n.stopPropagation();r.showSurveyResult(t.row.getDataPosition())}})}});r.isTrustedAccess&&(window.SurveyAnalyticsTabulator.TableExtensions.registerExtension({location:"details",name:"delete",visibleIndex:1,render:function(n,t){return window.SurveyAnalyticsTabulator.DocumentHelper.createElement("button","rounded-button rounded-button--danger",{innerHTML:"Delete Result",onclick:function(n){n.stopPropagation();var i=confirm("Are you sure you want to delete the result ?");i&&r.deleteSurveyResult(t.row)}})}}),window.SurveyAnalyticsTabulator.TableExtensions.findExtension("column","makepublic").visibleIndex=2);r.surveyAnalyticsTabulator=new window.SurveyAnalyticsTabulator.Tabulator(r.survey,n,{haveCommercialLicense:!0},[]);r.surveyAnalyticsTabulator.onPermissionsChangedCallback=function(n){if(!i.preventSendingAJAX){var t=n.permissions;i.savePermissions(i.surveyId,t,i.isLoading);i.preventSendingAJAX=!0;i.surveyAnalyticsVisPanel.permissions=t;i.preventSendingAJAX=!1}};r.surveyAnalyticsTabulator.render(document.getElementById("dataTablesContainer").children[0]);r.surveyAnalyticsTabulator.onStateChanged.add(function(n,t){i.saveTableState(i.surveyId,t,i.isLoading)});r.surveyAnalyticsTabulator.state=t;r.surveyAnalyticsTabulator.refresh(!0)},n.prototype.showTable=function(n){var t="table";n.activeTab(t);this.surveyAnalyticsTabulator.layout(!0);window.location.hash="#"+t},n.prototype.showSummary=function(n){var t="summary";n.activeTab(t);this.surveyAnalyticsVisPanel.layout();window.location.hash="#"+t},n.prototype.showInfo=function(n){var t="info";n.activeTab(t);window.location.hash="#"+t},n}(),f=i(1),ot=function(){function n(n,t,i,u,f){var e=this;this.surveys=r.observableArray();this.archivedSurveys=r.observableArray();this.activeSurveys=r.observableArray();this.organizations=r.observableArray();this.isLoading=r.observable(!1);this.organizationId="";this.accessKey="";this.hasOrganizations=!1;this.url="https://api.surveyjs.io/private/Surveys/";this.showActive=r.observable(!0);this.archive=function(n){n.isValid(!1);e.postAction("archive",n.id,undefined,function(){e.removeSurvey(n)})};this.restore=function(n){n.isValid(!1);e.postAction("restore",n.id,undefined,function(){e.removeSurvey(n)})};this.delete=function(n){confirm("Do you really want to delete this survey? This operation can't be undone.")&&(n.isValid(!1),e.deleteAction("delete",n.id,function(){e.removeSurvey(n)}))};this.clone=function(n){n.isValid(!1);e.postAction("clone",n.id,undefined,function(){e.loadActive()})};this.publish=function(n){e.postAction("publish",n.id,undefined,function(){n.isPublished(!0)})};this.unpublish=function(n){e.postAction("unPublish",n.id,undefined,function(){n.isPublished(!1)})};this.changeOrganization=function(n,t){confirm("Do you really want to move this survey to another organization? This operation can't be undone.")&&(n.isValid(!1),e.postAction("changeOrganization",n.id,"organizationId="+t.target.value,function(){this.loadActive()}))};this.postEdit=function(n){n.isValid(!1);e.cancelEdit(n);var t=n.name();n.name(n.editingName());e.postAction("changeName",n.id,"name="+n.editingName(),function(){n.isValid(!0)},function(){n.name(t)})};this.onFail=function(n){e.isLoading(!1);alert(JSON.stringify(n))};this.nameEditorKeypress=function(n,t){t.keyCode===13?e.postEdit(n):t.keyCode===27&&e.cancelEdit(n)};this.surveys([]);this.setOrganizations(t);u&&(this.url=u);t&&t.length!==0&&(this.hasOrganizations=!0);this.organizationId=i;this.accessKey=f;this.loadActive();this.loadSurveysAtBackground()}return n.prototype.setOrganizations=function(n){n&&n.length!==0||this.organizations([]);this.organizations(n)},n.prototype.loadData=function(n){var t=this;this.isLoading(!0);this.setData(null);f.getJSON(n,function(n){t.setData(n);t.isLoading(!1)}).fail(this.onFail)},n.prototype.setData=function(n){var i,t;for(n||(n=[]),i=[],t=0;t<n.length;t++)i.push(h(n[t]));this.surveys(i)},n.prototype.createUrl=function(n){return n=this.url+n,this.accessKey&&(n=n+"&accessKey="+this.accessKey),encodeURI(n)},n.prototype.postAction=function(n,t,i,r,u){u===void 0&&(u=undefined);this.performAction("PUT",n,t,i,r,u)},n.prototype.deleteAction=function(n,t,i,r){r===void 0&&(r=undefined);this.performAction("DELETE",n,t,undefined,i,r)},n.prototype.performAction=function(n,t,i,r,u,f){var o,e;f===void 0&&(f=undefined);o=this.url+t+"/"+i+"?";this.accessKey&&(o=o+"accessKey="+this.accessKey);r&&(o=o+"&"+r);e=new XMLHttpRequest;e.onreadystatechange=function(){e.readyState==4&&(e.status==200?u&&u():(f&&f(),alert(e.statusText)))};e.open(n,o,!0);e.setRequestHeader("Content-Type","application/json;charset=UTF-8");e.send()},n.prototype.loadActive=function(){this.showActive(!0);this.loadData(this.createUrl("getActive?ownerId="+GetOwnerIdContext()))},n.prototype.loadArchive=function(){this.showActive(!1);this.loadData(this.createUrl("getArchive?ownerId="+GetOwnerIdContext()))},n.prototype.loadSurveysAtBackground=function(){this.loadArchiveAtBackground();this.loadActiveAtBackground()},n.prototype.loadArchiveAtBackground=function(){var n=this,t=this.createUrl("getArchive?ownerId="+GetOwnerIdContext());this.isLoading(!0);f.getJSON(t,function(t){var r,i;for(t||(t=[]),r=[],i=0;i<t.length;i++)r.push(h(t[i]));n.archivedSurveys(r);n.isLoading(!1)}).fail(this.onFail)},n.prototype.loadActiveAtBackground=function(){var n=this,t=this.createUrl("getActive?ownerId="+GetOwnerIdContext());this.isLoading(!0);f.getJSON(t,function(t){var r,i;for(t||(t=[]),r=[],i=0;i<t.length;i++)r.push(h(t[i]));n.activeSurveys(r);n.isLoading(!1)}).fail(this.onFail)},n.prototype.removeSurvey=function(n){var t=this.surveys.indexOf(n);t>-1&&this.surveys.splice(t,1);this.loadSurveysAtBackground()},n.prototype.startEdit=function(n,t){n.editingName(n.name());n.isEditing(!0);var i=f;i(t.target).parents("tr").find("input").focus()},n.prototype.cancelEdit=function(n){n.isEditing(!1)},n.prototype.showInfo=function(n){n.showInfo(!n.showInfo())},n}(),st=function(){function n(n,t,i,u){var f=this;this.url=t;this.surveyId=i;this.accessKey=u;this.editingName=r.observable();this.prevName=r.observable();this.isEditing=r.observable(!1);this.startEdit=function(n,t){f.editingName(f.prevName());f.isEditing(!0);t.target.parentElement.parentElement.parentElement.children[0].children[0].focus()};this.postEdit=function(){f.cancelEdit();var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState==4&&(n.status==200?f.prevName(f.editingName()):(f.editingName(f.prevName()),alert(n.statusText)))};n.open("PUT",f.url+"changeName?id="+f.surveyId+"&accessKey="+f.accessKey+"&name="+f.editingName(),!0);n.send()};this.cancelEdit=function(){f.isEditing(!1)};this.nameEditorKeypress=function(n,t){t.keyCode===13?f.postEdit():t.keyCode===27&&f.cancelEdit()};this.editingName(n);this.prevName(n)}return n}();y={"":{title:"Choose product to add..."},"1":{title:"SurveyJS Creator (including PDF)"},"2":{title:"SurveyJS PDF"},"3":{title:"SurveyJS Analytics"},"4":{title:"SurveyJS Pro"},"5":{title:"SurveyJS Basic"},"100":{title:"SurveyJS Creator (including PDF) Renewal"},"101":{title:"SurveyJS Creator (including PDF) Renewal"},"102":{title:"SurveyJS PDF Renewal"},"103":{title:"SurveyJS Analytics Renewal"},"104":{title:"SurveyJS Pro Renewal"},"105":{title:"SurveyJS Basic Renewal"}};nt=function(){function n(n,t,i,u,e,o,s,h){var l=this,c;this.recalc=function(n,t){n===void 0&&(n=!1);!l.id||f.ajax({url:"/api/Cart/"+(n?"recalc":"update"),type:"POST",data:{Product:l.product(),Count:l.quantity,Id:l.id,Country:model.country(),CompanyName:model.companyName(),CompanyVATNumber:model.companyVATNumber(),Currency:model.currency()},success:function(n){updateOrderDetails(n);updateCartTopBarItem(n);!t||t(n)},error:function(){}})};this.forceRecalc=function(){l.recalc(!0)};c=this;c.product=r.observable(""+n||"1");c._quantity=r.observable(""+t||"1");c.id=i;c.personalDiscount=u;c.volumeDiscount=e;c.price=o;c.total=s;c.comment=h;c.title=r.computed(function(){return y[""+c.product()||""].title});c.totalDiscount=u>=0?u||e:Math.abs(u)+e;c.discountTitle=r.computed(function(){return!c.comment?c.title()+(!u?" (VOLUME DISCOUNT)":" (PERSONAL DISCOUNT)"):c.title()+" ("+c.comment+")"});c._productSubscr=c.product.subscribe(function(){return c.recalc()})}return Object.defineProperty(n.prototype,"quantity",{get:function(){return this._quantity()},set:function(n){var t=this._quantity();if(n!==t){this._quantity(n);this.onQuantityChanged(t,n)}},enumerable:!1,configurable:!0}),n.prototype.onQuantityChanged=function(n,t){var i=this;this.recalc(!1,function(){var r=parseInt(n),u=parseInt(t);g(i,u-r,model.currency())})},n.prototype.getJson=function(){return{id:this.id,product:this.product(),title:this.title(),quantity:this.quantity,price:this.price,total:this.total,personalDiscount:this.personalDiscount,volumeDiscount:this.volumeDiscount,totalDiscount:this.totalDiscount,discountTitle:this.discountTitle(),comment:this.comment}},n.prototype.dispose=function(){this._productSubscr.dispose();this.title.dispose()},n}();p=function(){function n(n){var t=this;this.elementRect=r.observable(undefined);this.currentStep=r.observable(0);this.goTo=function(n){t.currentStep(t.tour.steps.indexOf(n))};this.visible=r.observable(!0);this.tourDescription=n;this.currentStep.subscribe(function(){return t.updatePosition()});this.updatePosition()}return n.prototype.updatePosition=function(){var i=this.step.selector,n=document.querySelectorAll(i)[0],t;n||!this.tourDescription.rollbackSelector||(n=document.querySelectorAll(this.tourDescription.rollbackSelector)[0]);!n||(t=n.getBoundingClientRect(),this.elementRect(t))},Object.defineProperty(n.prototype,"tour",{get:function(){return r.unwrap(this.tourDescription)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"step",{get:function(){return this.tour.steps[this.currentStep()]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"showBackButton",{get:function(){return this.currentStep()>-1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"showNextButton",{get:function(){return this.currentStep()<this.tour.steps.length},enumerable:!1,configurable:!0}),n.prototype.goBack=function(n){this.isStartPage&&n.currentStep()==0?this.hide(this):n.currentStep()>0&&n.currentStep(n.currentStep()-1)},n.prototype.goNext=function(n){n.currentStep()<n.tour.steps.length-1?n.currentStep(n.currentStep()+1):this.currentStep()==this.tour.steps.length-1&&this.hide(this)},Object.defineProperty(n.prototype,"backTitle",{get:function(){return this.isStartPage?"Later":"Back"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"nextTitle",{get:function(){return this.isStartPage?"Start Tour":this.currentStep()==this.tour.steps.length-1?"Got It":"Next"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isStartPage",{get:function(){return this.tourDescription.hasStartPage&&this.currentStep()==0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isTop",{get:function(){return!this.isStartPage&&this.step.location.indexOf("top")!==-1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isBottom",{get:function(){return!this.isStartPage&&this.step.location.indexOf("bottom")!==-1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isLeft",{get:function(){return this.step.location.indexOf("left")!==-1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRight",{get:function(){return this.step.location.indexOf("right")!==-1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSide",{get:function(){return this.step.location.indexOf("side")!==-1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){if(this.isStartPage)return"50%";var n=this.elementRect();if(!!n){if(this.isBottom)return n.top+n.height+"px";if(this.isSide)return n.top+"px"}return undefined},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){var n,t;return this.isStartPage?"50%":(n=this.elementRect(),!!n&&this.isRight)?(t=this.isSide?0:n.width,n.right-t+"px"):undefined},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){var n=this.elementRect(),t;return!!n&&this.isLeft?(t=this.isSide?0:n.width,"calc(100% - "+(n.left+t)+"px)"):undefined},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){var n=this.elementRect();return!!n&&this.isTop?"calc(100% - "+(n.bottom-n.height)+"px)":undefined},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return{top:this.top,left:this.left,right:this.right,bottom:this.bottom}},enumerable:!1,configurable:!0}),n.prototype.hide=function(n){n.visible(!1)},n.prototype.hideForever=function(n){localStorage.setItem("isTourRejected","true");n.hide(n)},n}();!window.ko||r.components.register("tour-component",{viewModel:{createViewModel:function(n){return new p(n.tour)}},template:{element:"tour-component"}})}])})